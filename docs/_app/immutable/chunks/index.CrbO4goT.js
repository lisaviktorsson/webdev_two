import{aA as O,F as U,D as d,o as F,aL as G,al as h,C as m,_ as K,U as b,q as M,O as H,ae as T,a6 as k,aM as A,aN as C,K as D,L as p,aO as P,d as Z}from"./runtime.DsGBqHQz.js";import{H as j}from"./control.CYgJF_JY.js";const x=0,i=1,y=2;function J(o,u,n,N,L){d&&F();var f=o,w=O(),q=Z,a=b,r,t,l,_=(w?H:T)(void 0),E=(w?H:T)(void 0),v=!1;function c(e,s){v=!0,s&&(k(I),A(I),C(q));try{e===x&&n&&(r?D(r):r=m(()=>n(f))),e===i&&N&&(t?D(t):t=m(()=>N(f,_))),e!==x&&r&&p(r,()=>r=null),e!==i&&t&&p(t,()=>t=null),e!==y&&l&&p(l,()=>l=null)}finally{s&&(C(null),A(null),k(null),P())}}var I=U(()=>{if(a!==(a=u())){if(G(a)){var e=a;v=!1,e.then(s=>{e===a&&(h(_,s),c(i,!0))},s=>{if(e===a)throw h(E,s),c(y,!0),E.v}),d?n&&(r=m(()=>n(f))):K(()=>{v||c(x,!0)})}else h(_,a),c(i,!1);return()=>a=b}});d&&(f=M)}function Q(o,u){throw new j(o,u)}new TextEncoder;export{J as a,Q as e};
