import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.kkaBD5aU.js";import{p as E,aE as J,aF as N,aC as T,a as k,T as s,Q as i,aB as B,s as g,c as _,aD as S,r as c,t as D}from"../chunks/runtime.D7Wnj0fX.js";import{s as M}from"../chunks/render.smxQznNC.js";import{e as F,i as P}from"../chunks/each.Btqh4Es0.js";import{a as h,t as d}from"../chunks/template.CvXheLdW.js";import{h as Q}from"../chunks/svelte-head.CfOCrEO5.js";import{E as R,a as j,e as q}from"../chunks/elizabot.CpZv4FcP.js";import{f as A}from"../chunks/events.DtDyvcPQ.js";import{i as G}from"../chunks/lifecycle.CL8LSRxO.js";import{s as H,a as K}from"../chunks/store._img2h1m.js";import{w as I}from"../chunks/index.BuEqVMVQ.js";import{o as L}from"../chunks/index-client.BXWsId-j.js";const U=(window==null?void 0:window.localStorage.getItem("story_id"))??"1",V=I(U);V.subscribe(o=>{window==null||window.localStorage.setItem("story_id",o)});const W=(window==null?void 0:window.localStorage.getItem("chat"))??"1",l=I(W);l.subscribe(o=>{window==null||window.localStorage.setItem("chat",o)});var X=d(`<link rel="stylesheet" href="/pico.min.css"> <style>nav {
      margin-left: 10%;
      margin-right: 10%;
    }</style>`,1),Y=d("<article><span> </span></article>"),Z=d('<button class=".btn">Reset</button> <div class="container"><h1>TODO: Complete assignment</h1> <div class="scrollable"></div> <form method="post"><input type="text" name="text"></form></div>',1);function gt(o,O){E(O,!1);const z=H(),v=()=>K(l,"$stringchat_store",z),m=S();let u=new R,t=S([]);L(()=>{s(m).length>2?(i(t,JSON.parse(s(m))),console.log(s(t))):w()});function w(){localStorage.clear(),i(t,[{user:"eliza",text:u.getInitial()}]),l.set(JSON.stringify(s(t)))}async function $(e){i(t,[...s(t),{user:"you",text:e}]),l.set(JSON.stringify(s(t))),await new Promise(a=>setTimeout(a,1e3+Math.random()*1e3)),i(t,[...s(t),{user:"eliza",text:u.transform(e)}])}J(()=>v(),()=>{i(m,v())}),N(),G();var y=Z();Q(e=>{var a=X();B(2),h(e,a)});var x=T(y),b=g(x,2),p=g(_(b),2);F(p,5,()=>s(t),P,(e,a)=>{var r=Y(),n=_(r),f=_(n,!0);c(n),c(r),D(()=>M(f,s(a).text)),h(e,r)}),c(p);var C=g(p,2);j(C,(e,a)=>{var r;return(r=q)==null?void 0:r(e,a)},()=>({form:e,data:a,action:r,cancel:n})=>{n();const f=a.get("text");$(f),e.reset()}),c(b),A("click",x,w),h(o,y),k()}export{gt as component};
